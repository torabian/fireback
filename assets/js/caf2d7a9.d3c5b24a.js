"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3254],{6365:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"react-and-react-native-translation","title":"Stop Chaos! React & React Native Translations Done Right Once","description":"Critical problems with usual react translation libraries, i18n and others","source":"@site/docs/react-and-react-native-translation.mdx","sourceDirName":".","slug":"/react-and-react-native-translation","permalink":"/fireback/docs/react-and-react-native-translation","draft":false,"unlisted":false,"editUrl":"https://github.com/torabian/fireback/tree/main/docs/docs/react-and-react-native-translation.mdx","tags":[],"version":"current","frontMatter":{"title":"Stop Chaos! React & React Native Translations Done Right Once","author":"Ali Torabi","excerpt":"Have you ever had problem with translating an React or React Native application, and always end up with problems with keys, adding extra pipes, hardcoded translations? Get in this tutorial with me and we will solve this problem for once.","og_image":"/content/react-react-native-translation-fireback.png","lang":"en"},"sidebar":"tutorialSidebar","previous":{"title":"Passports Introduction","permalink":"/fireback/docs/passports-module"}}');var s=t(4848),i=t(8453);const r={title:"Stop Chaos! React & React Native Translations Done Right Once",author:"Ali Torabi",excerpt:"Have you ever had problem with translating an React or React Native application, and always end up with problems with keys, adding extra pipes, hardcoded translations? Get in this tutorial with me and we will solve this problem for once.",og_image:"/content/react-react-native-translation-fireback.png",lang:"en"},o=void 0,l={},c=[{value:"Critical problems with usual react translation libraries, i18n and others",id:"critical-problems-with-usual-react-translation-libraries-i18n-and-others",level:2},{value:"Solution is simple; And no library is needed",id:"solution-is-simple-and-no-library-is-needed",level:2},{value:"What you need before",id:"what-you-need-before",level:2},{value:"Step 1: Verify you have access to fireback",id:"step-1-verify-you-have-access-to-fireback",level:2},{value:"Step 2: Create useLocale hook",id:"step-2-create-uselocale-hook",level:2},{value:"Step 3: Create the useS hook.",id:"step-3-create-the-uses-hook",level:2},{value:"Step 4: Create &#39;strings&#39; folder",id:"step-4-create-strings-folder",level:2},{value:"Step 5: Create strings/strings-en.yml",id:"step-5-create-stringsstrings-enyml",level:2},{value:"Step 6: Use and config fireback language generator",id:"step-6-use-and-config-fireback-language-generator",level:2},{value:"Step 7: Make this automated with VSCode run-on-save",id:"step-7-make-this-automated-with-vscode-run-on-save",level:2},{value:"Step 8: Use translations",id:"step-8-use-translations",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"critical-problems-with-usual-react-translation-libraries-i18n-and-others",children:"Critical problems with usual react translation libraries, i18n and others"}),"\n",(0,s.jsx)(n.p,{children:"The significance of translations appears to be overlooked, with the second language\noften treated as an afterthought in my projects; some even begin with non-English\nstrings hardcoded in templates, only to encounter challenges later when attempting\nto modify them, as the lack of type safety prevents immediate detection of all\noccurrences, resulting in an inconsistent user experience where English words may\nunexpectedly appear in a Spanish interface,\nnegatively impacting the brand's reputation."}),"\n",(0,s.jsx)(n.p,{children:"The i18n module, while initially a convenient tool for handling translations\nin React and React Native apps, often falls short in several key areas. One prevalent issue is the\nprevalence of hardcoded strings within templates, making it challenging to maintain\nand update translations efficiently. Additionally, the lack of IntelliSense support\nhampers developers' productivity, leading to potential errors and inconsistencies in\ntranslations. Moreover, the module's limited capabilities for managing different\nlanguages result in cumbersome workflows and difficulties in maintaining\nlanguage-specific content."}),"\n",(0,s.jsx)(n.p,{children:"Another significant drawback is the cumbersome process of\nstoring translations in separate JSON files, which can lead to cluttered project\nstructures and version control issues. These challenges collectively contribute to a\nsuboptimal translation experience, urging developers to seek alternative solutions\nfor their localization needs."}),"\n",(0,s.jsx)(n.h2,{id:"solution-is-simple-and-no-library-is-needed",children:"Solution is simple; And no library is needed"}),"\n",(0,s.jsx)(n.p,{children:"In fact, doing a bullet proof translation mechanism for React and React Native projects\ndoes not need another library at all. In this tutorial we are going to solve this with a single hook:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Defining ",(0,s.jsx)(n.code,{children:"useS"})," hook to use a string object."]}),"\n",(0,s.jsxs)(n.li,{children:["Defining ",(0,s.jsx)(n.code,{children:"useLocale"})," hook to keep locale settings, and also detect locale based on\nthe user OS settings or browser settings."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"what-you-need-before",children:"What you need before"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"You can apply what you learn here to new projects, as well as your existing project"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Install fireback v1.1.9 or later. You can find the binaries for different systems here:\n",(0,s.jsx)("a",{href:"https://github.com/torabian/fireback/releases",target:"_blank",children:(0,s.jsx)(n.a,{href:"https://github.com/torabian/fireback/releases",children:"https://github.com/torabian/fireback/releases"})})," for installers\nbinary, and you can place it inside your project folder and ignore it."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:'I use the VSCode, and "Run On Save extension" is enabled. You can run the translation\nfrom CLI as well, but having this extension makes life easier by far.'}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"step-1-verify-you-have-access-to-fireback",children:"Step 1: Verify you have access to fireback"}),"\n",(0,s.jsx)(n.p,{children:"You need to make sure you have access to fireback binary, either installed globally,\nor you put it in the project directory, and ignored the file."}),"\n",(0,s.jsx)(n.p,{children:"Fireback also could be installed on npm using `npm i -D fireback-tools'. Make sure you\ninstall it as dev dependency, so it's binaries do not bundle with react native apps."}),"\n",(0,s.jsx)(n.h2,{id:"step-2-create-uselocale-hook",children:"Step 2: Create useLocale hook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"export function useLocale() {\n  const [locale, setLocale] = useState({\n    lang: 'en',\n    region: 'us',\n  })\n\n  const dir = locale.lang === 'fa' || locale.lang === 'ar' ? 'rtl' : 'ltr'\n\n  // Here you can implement the rest of the necessary functionality\n  // for detecting the locale, or for example, extra function to set\n  // only the language or so.\n\n  return {lang, region, dir}\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-3-create-the-uses-hook",children:"Step 3: Create the useS hook."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import { useLocale } from "./useLocale";\n\n// This typescript generic is important, to use strongly typed translation\n// keys\nexport function useS<T>(v: T): T {\n  /*\n   * This could be your own definition of the locale language\n   * This variable usually should include the current language in the app\n   * such as \'en\', or \'fa\', etc.\n   * you might also extend it to separate the language-locale such as en-us\n   * i haven\'t done yet due to no need\n   */\n  const { lang } = useLocale();\n\n  /*\n   * Here we check if there lang is anything other than en, and in translation\n   * files we have such thing with a $ prefix - which auto generated by fireback\n   * we will access them instead. useS function will return always T,\n   * so all the translations will be typesafe anyway from typescript compiler\n   * perspective\n   */\n  if (!lang || lang === "en") {\n    return v;\n  } else if (!v["$" + lang]) {\n    return v;\n  } else {\n    return v["$" + lang];\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"step-4-create-strings-folder",children:"Step 4: Create 'strings' folder"}),"\n",(0,s.jsxs)(n.p,{children:["How you organize the translations is up to you, in fact. I prefer to create a ",(0,s.jsx)(n.code,{children:"strings"}),"\nfolder per module and place all of their translations into that directory.\nThis way, when I move a module folder to another project or if I want to make\nit a library, I won't have to worry about the translations; they're already\nsolved and attached to the component or module."]}),"\n",(0,s.jsxs)(n.p,{children:["On the other hand, if you want to create a ",(0,s.jsx)(n.code,{children:"strings"})," folder for the entire app,\nnothing would stop you."]}),"\n",(0,s.jsx)(n.h2,{id:"step-5-create-stringsstrings-enyml",children:"Step 5: Create strings/strings-en.yml"}),"\n",(0,s.jsx)(n.p,{children:"It's critical to keep in mind that the Fireback Language Editor module assumes English\nas the primary language of the app. Simply put, English must be present, and other languages\nwill be synced with keys from that one."}),"\n",(0,s.jsxs)(n.p,{children:["Now, let's put the ",(0,s.jsx)(n.code,{children:"content"})," inside the YAML.\n",(0,s.jsxs)(n.strong,{children:["All translation keys must go under the ",(0,s.jsx)(n.code,{children:"content"})," key"]}),",\notherwise they will not be considered translations."]}),"\n",(0,s.jsx)(n.p,{children:"If you are not familiar with YAML, think of it as JSON without quotes, and remember:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"content:\n  loading: Loading...\n  done: Done :)\n"})}),"\n",(0,s.jsx)(n.p,{children:"Is different from the code below. (Basically intention is super important)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"content:\n  loading: Loading...\n  done: Done :)\n"})}),"\n",(0,s.jsx)(n.p,{children:"So far, this was all the necessary steps we needed to take for translating our app."}),"\n",(0,s.jsx)(n.h2,{id:"step-6-use-and-config-fireback-language-generator",children:"Step 6: Use and config fireback language generator"}),"\n",(0,s.jsx)(n.p,{children:"Now we need to use the Fireback language generator to simplify key generation for us."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"fireback gen strings --path ./src/strings/strings-en.yml --langs pl,fa\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This command will generate two additional files in the same directory:\n",(0,s.jsx)(n.code,{children:"strings-pl.yml"})," and ",(0,s.jsx)(n.code,{children:"strings-fa.yml"}),". If you open them, you will see identical\ncontent to your ",(0,s.jsx)(n.code,{children:"strings-en.yml"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Also in the same directory, you will find a ",(0,s.jsx)(n.code,{children:"translations.ts"})," file.\nIt contains content similar to the snippet below, which has generated TypeScript\nconstants for all three languages and exported them as ",(0,s.jsx)(n.code,{children:"strings"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"step-7-make-this-automated-with-vscode-run-on-save",children:"Step 7: Make this automated with VSCode run-on-save"}),"\n",(0,s.jsx)(n.p,{children:'Using the CLI each time for building the translations is cumbersome. Therefore, we utilize the "Run on save" extension in VSCode, which you can install.'}),"\n",(0,s.jsxs)(n.p,{children:["Then, in our ",(0,s.jsx)(n.code,{children:"settings.json"})," in VSCode, we need to add these rules.\n(If you've never modified this file, create a folder named ",(0,s.jsx)(n.code,{children:".vscode"})," at the root\nof your project and add ",(0,s.jsx)(n.code,{children:"settings.json"})," inside it.)"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  // other configuration before\n\n  "emeraldwalk.runonsave": {\n    "commands": [\n      {\n        "match": "strings-([a-z][a-z]).yml$",\n        "cmd": "fireback gen strings --path ${file} --langs en,fa"\n      }\n    ]\n  }\n\n  // other configuration after\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["It would basically detect any ",(0,s.jsx)(n.code,{children:"strings-xx.yml"})," change in the project, and will run strings\ncompiler for you."]}),"\n",(0,s.jsx)(n.h2,{id:"step-8-use-translations",children:"Step 8: Use translations"}),"\n",(0,s.jsxs)(n.p,{children:["At this stage, the tarnslation dictionary has been created fully, and we can\nuse them by ",(0,s.jsx)(n.code,{children:"useS"})," and access the keys on the ",(0,s.jsx)(n.code,{children:"s"})," object. It's good to keep\nthe names consistent across the entire project to make it clean."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"React.js"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { strings } from "./strings/translations";\nexport function MyComponent() {\n  const s = useS(strings)\n\n  return <p>{s.loading}</p>\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"React Native"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { Text } from 'react-native';\nimport { strings } from \"./strings/translations\";\nexport function MyComponent() {\n  const s = useS(strings)\n\n  return <Text>{s.loading}</Text>\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(n.p,{children:"To summarize, we have just created a robust system for adding translations to our react or react native app.\nThis method will help prevent many errors, such as missing keys in certain\nlanguages and hard-coded strings for translation."}),"\n",(0,s.jsx)(n.p,{children:"The Fireback Strings CLI offers additional options that you may want to explore on your own.\nThis feature is available starting from Fireback v1.1.9"})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var a=t(6540);const s={},i=a.createContext(s);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);