"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4485],{4692:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>a,frontMatter:()=>o,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"actions","title":"Actions","description":"You can define actions, which mostly are similar to defining controller","source":"@site/docs/actions.mdx","sourceDirName":".","slug":"/actions","permalink":"/fireback/docs/actions","draft":false,"unlisted":false,"editUrl":"https://github.com/torabian/fireback/tree/main/docs/docs/actions.mdx","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Actions","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Entities","permalink":"/fireback/docs/entities"},"next":{"title":"DTOs","permalink":"/fireback/docs/dtos"}}');var r=i(4848),c=i(8453);const o={title:"Actions",sidebar_position:7},d=void 0,l={},t=[{value:"Defining actions",id:"defining-actions",level:2},{value:"Module3Action Struct",id:"module3action-struct",level:2},{value:"<code>Name</code>",id:"name",level:3},{value:"<code>CliName</code>",id:"cliname",level:3},{value:"<code>ActionAliases</code>",id:"actionaliases",level:3},{value:"<code>Url</code>",id:"url",level:3},{value:"<code>Method</code>",id:"method",level:3},{value:"<code>Query</code>",id:"query",level:3},{value:"<code>Description</code>",id:"description",level:3},{value:"<code>Format</code>",id:"format",level:3},{value:"<code>In</code>",id:"in",level:3},{value:"<code>Out</code>",id:"out",level:3},{value:"<code>SecurityModel</code>",id:"securitymodel",level:3},{value:"<code>CliAction</code>",id:"cliaction",level:3},{value:"<code>Handlers</code>",id:"handlers",level:3},{value:"<code>Flags</code>",id:"flags",level:3},{value:"<code>ExternFuncName</code>",id:"externfuncname",level:3},{value:"<code>RequestEntity</code>",id:"requestentity",level:3},{value:"<code>ResponseEntity</code>",id:"responseentity",level:3},{value:"<code>Action</code>",id:"action",level:3},{value:"<code>TargetEntity</code>",id:"targetentity",level:3},{value:"<code>RootModule</code>",id:"rootmodule",level:3},{value:"Notes",id:"notes",level:2}];function h(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"You can define actions, which mostly are similar to defining controller\non MVC frameworks, which would accept a body, and sends a response, usually\nas a json format."}),"\n",(0,r.jsxs)(n.p,{children:["Fireback actions will become both accessible using ",(0,r.jsx)(n.code,{children:"cli"})," and ",(0,r.jsx)(n.code,{children:"http"})," server, it means\nfireback is wrappering the actions as general functions (rpc) to be called rather than\ntraditional http request. This would make every action define both available on cli\nand server. You can customize this of course, some actions make no sense to be available\non web or cli."]}),"\n",(0,r.jsx)(n.h2,{id:"defining-actions",children:"Defining actions"}),"\n",(0,r.jsx)(n.p,{children:"In any Module3.yml file, you can set array of actions in the root, as well as actions specific to entities."}),"\n",(0,r.jsx)(n.p,{children:"Here is an example of actions from WorkspaceModule3.yml file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"actions:\n  - name: importUser\n    url: /user/import\n    method: post\n    description: 'Imports users, and creates their passports, and all details'\n    in:\n      fields:\n        - name: path\n          type: string\n    out:\n      dto: OkayResponseDto\n"})}),"\n",(0,r.jsxs)(n.p,{children:["As you see, defining an action is very straight forward, you need to define a name for it, which will be accessible\nin golang. ",(0,r.jsx)(n.code,{children:"url"})," is also an important aspect, which would make it available to http router. ",(0,r.jsx)(n.code,{children:"method"})," is similar\nto http methods, and on web server would become that method, and on cli, it would not matter because the ",(0,r.jsx)(n.code,{children:"name"}),"\nfield would be prefered."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"description"})," is a way to describe the action and would be used on cli, http specs, and some other places which\nan explanation of the API is needed."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"in"})," and ",(0,r.jsx)(n.code,{children:"out"})," fields do define input and output of the action. They have the same struct underneath, you can set"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"entity, which will be indicating an entity is representing the response or request."}),"\n",(0,r.jsx)(n.li,{children:"dto, which represents the dto."}),"\n",(0,r.jsxs)(n.li,{children:["fields, which is basically an array of fields and you can learn how to define them in\n",(0,r.jsx)(n.a,{href:"/fireback/docs/fields",children:"Fields"})," section."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"module3action-struct",children:"Module3Action Struct"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Module3Action"})," struct defines an action that can be used both in HTTP routes and CLI commands. It is less tightly coupled with HTTP-specific definitions and can directly operate on sockets. Below is a detailed explanation of each field in the struct:"]}),"\n",(0,r.jsx)(n.h3,{id:"name",children:(0,r.jsx)(n.code,{children:"Name"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","The general name of the action. This name is used in Go code generation, request/response bodies, and more. It also serves as the default CLI action name unless overridden by ",(0,r.jsx)(n.code,{children:"CliName"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"cliname",children:(0,r.jsx)(n.code,{children:"CliName"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Overrides the CLI action name. If not specified, the ",(0,r.jsx)(n.code,{children:"Name"})," field is used (converted to kebab-case if necessary)."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"actionaliases",children:(0,r.jsx)(n.code,{children:"ActionAliases"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"[]string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","A list of CLI aliases for the action. Useful for providing shorter or more convenient command names, e.g., ",(0,r.jsx)(n.code,{children:"u"})," as an alias for ",(0,r.jsx)(n.code,{children:"update"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"url",children:(0,r.jsx)(n.code,{children:"Url"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","The HTTP route for the action, typically in the ",(0,r.jsx)(n.code,{children:"/api/resource/action"})," format. If not provided, the action is CLI-only."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"method",children:(0,r.jsx)(n.code,{children:"Method"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Specifies the HTTP method (",(0,r.jsx)(n.code,{children:"POST"}),", ",(0,r.jsx)(n.code,{children:"GET"}),", ",(0,r.jsx)(n.code,{children:"DELETE"}),", etc.). Additionally, Fireback introduces a ",(0,r.jsx)(n.code,{children:"reactive"})," method for opening WebSocket connections."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"query",children:(0,r.jsx)(n.code,{children:"Query"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"[]*Module3Field"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Type-safe query parameters, accessible with ",(0,r.jsx)(n.code,{children:"--qs"})," in CLI and as standard query strings in HTTP."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"description",children:(0,r.jsx)(n.code,{children:"Description"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","A detailed description of the action. This is used in comments, API specifications, and other documentation."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"format",children:(0,r.jsx)(n.code,{children:"Format"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Defines the request format. Available formats:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"POST_ONE"}),": Single post body."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"PATCH_ONE"}),": Single patch body."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"QUERY"}),": Returns an array of items, compatible with infinite scroll."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"PATCH_BULK"}),": Handles arrays of entities for batch updates."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"in",children:(0,r.jsx)(n.code,{children:"In"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"*Module3ActionBody"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Defines the request body, similar to HTTP ",(0,r.jsx)(n.code,{children:"body"}),". See ",(0,r.jsx)(n.code,{children:"Module3ActionBody"})," for details."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"out",children:(0,r.jsx)(n.code,{children:"Out"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"*Module3ActionBody"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Defines the response body. See ",(0,r.jsx)(n.code,{children:"Module3ActionBody"})," for details."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"securitymodel",children:(0,r.jsx)(n.code,{children:"SecurityModel"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"*SecurityModel"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Specifies access control, including permissions, tokens, and other security checks. Refer to the ",(0,r.jsx)(n.code,{children:"SecurityModel"})," struct for more information."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"cliaction",children:(0,r.jsx)(n.code,{children:"CliAction"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"func(c *cli.Context, security *SecurityModel) error"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","CLI implementation of the action. Fireback ensures CLI and HTTP functionalities are consistent."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"handlers",children:(0,r.jsx)(n.code,{children:"Handlers"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"[]gin.HandlerFunc"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","HTTP implementation of the action using Gin handlers. Fireback handles security checks before invoking these handlers."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"flags",children:(0,r.jsx)(n.code,{children:"Flags"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"[]cli.Flag"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","CLI flags supported by the action. Fireback uses the ",(0,r.jsx)(n.code,{children:"urfave/cli"})," library."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"externfuncname",children:(0,r.jsx)(n.code,{children:"ExternFuncName"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"string"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Used for external function generation (e.g., TypeScript). If left empty, Fireback generates it automatically."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"requestentity",children:(0,r.jsx)(n.code,{children:"RequestEntity"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"any"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Represents the request body for RPC code generation in languages like TypeScript and Swift."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"responseentity",children:(0,r.jsx)(n.code,{children:"ResponseEntity"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"any"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Represents the response body for RPC code generation."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"action",children:(0,r.jsx)(n.code,{children:"Action"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"any"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Represents the core implementation of the action, primarily for code generation purposes."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"targetentity",children:(0,r.jsx)(n.code,{children:"TargetEntity"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"any"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Specifies the target entity for the action. Useful for actions like deletion that don't have request or response bodies."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"rootmodule",children:(0,r.jsx)(n.code,{children:"RootModule"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type:"})," ",(0,r.jsx)(n.code,{children:"*Module3"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Metadata for internal code generation. Links the action to the parent module."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fireback provides consistent functionality across CLI and HTTP by generating code that integrates both."}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"SecurityModel"})," ensures secure access to actions, and custom handlers allow for flexible implementation."]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var s=i(6540);const r={},c=s.createContext(r);function o(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);